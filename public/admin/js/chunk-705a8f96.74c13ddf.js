(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-705a8f96","chunk-1415a27a"],{"04fc":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-header-wrapper",[a("page-filter",{attrs:{"query-param":e.queryParam,advanced:e.advanced,filters:e.filters}}),a("a-card",{attrs:{bordered:!1}},[a("page-action",{attrs:{"selected-row-keys":e.selectedRowKeys}}),a("s-table",{ref:"table",attrs:{"row-key":"id",columns:e.columns,data:e.loadData,rowSelection:e.rowSelection},scopedSlots:e._u([{key:"http_method",fn:function(t,r){return a("div",{},[e.checkIsEmpty(r.http_method)?a("a-tag",{attrs:{color:"blue"}},[e._v(" ANY ")]):e._l(r.http_method,(function(t){return a("a-tag",{key:t,attrs:{color:"blue"}},[e._v(" "+e._s(t)+" ")])}))],2)}},{key:"http_path",fn:function(t,r){return a("div",{},e._l(r.http_path,(function(t,r){return a("div",{key:r,staticClass:"mb-1"},[a("code",[e._v(e._s("/admin-api"+t))])])})),0)}},{key:"action",fn:function(t,r){return a("span",{},[1===r.id?a("a",{attrs:{disabled:""}},[e._v("禁止操作")]):a("span",[a("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("row-destroy",{attrs:{id:r.id,resource:e.resourceName},on:{ok:e.handleFilter}})],1)])}}])}),a("create-form",{ref:"createModal",attrs:{visible:e.visible,loading:e.confirmLoading,model:e.mdl},on:{cancel:e.handleCancel,ok:e.handleOk}})],1)],1)},n=[],i=(a("a15b"),a("b0c0"),a("5530")),o=a("b775");function s(e){return Object(o["b"])({url:"/admin-permissions",method:"get",params:e})}function c(e){return Object(o["b"])({url:"/admin-permissions",method:"post",data:e})}function l(e,t){return Object(o["b"])({url:"/admin-permissions/".concat(e),method:"put",data:t})}var d=a("61e9"),u=a("ddeb"),h=a("2ef0e"),f=a.n(h),m=new d["a"]({getList:s,add:c,update:l}),p={name:"PermissionList",mixins:[m],components:{CreateForm:u["default"]},data:function(){return{resourceName:"admin-permissions",columns:[{title:"ID",dataIndex:"id",sorter:!0},{title:"名称",dataIndex:"name"},{title:"标识",dataIndex:"slug"},{title:"请求方法",dataIndex:"http_method",scopedSlots:{customRender:"http_method"}},{title:"请求地址",dataIndex:"http_path",scopedSlots:{customRender:"http_path"}},{title:"创建时间",dataIndex:"created_at"},{title:"更新时间",dataIndex:"updated_at"},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],filters:[{field:"id",advanced:!1,label:"ID",type:"input"},{field:"name",advanced:!1,label:"名称",type:"input"},{field:"slug",advanced:!1,label:"标识",type:"input"},{field:"http_method",advanced:!0,label:"请求方法",type:"input"},{field:"http_path",advanced:!0,label:"请求地址",type:"input"},{field:"created_at",advanced:!0,label:"创建时间",type:"rangedatetime"},{field:"updated_at",advanced:!0,label:"更新时间",type:"datetime"}]}},methods:{handleEdit:function(e){this.visible=!0;var t=JSON.parse(JSON.stringify(e));this.checkIsEmpty(t.http_path)||(t.http_path=t.http_path.join("\n")),this.checkIsEmpty(t.http_method)&&(t.http_method=[]),this.mdl=Object(i["a"])({},t)},checkIsEmpty:function(e){return f.a.isEmpty(e)},getCheckboxProps:function(e){return{props:{disabled:1===e.id,name:e.name}}}}},b=p,v=a("2877"),g=Object(v["a"])(b,r,n,!1,null,null,null);t["default"]=g.exports},"61e9":function(e,t,a){"use strict";a("4160"),a("b0c0"),a("498a"),a("159b");var r=a("ade3"),n=a("5530"),i=a("2ef0e"),o=a.n(i),s=a("b775");function c(e,t){return Object(s["b"])({url:"/".concat(e,"/batch"),method:"delete",data:t})}t["a"]=function(e){var t=e.getList,a=e.add,i=e.update;return{provide:function(){return{handleFilter:this.handleFilter,handleCreate:this.handleCreate,toggleAdvanced:this.toggleAdvanced,resetSearchForm:this.resetSearchForm,batchDestroy:this.batchDestroy,handleRefresh:this.handleRefresh,loadingObj:this.loadingObj}},data:function(){var e=this;return{resourceName:"",visible:!1,confirmLoading:!1,mdl:null,advanced:!1,queryParam:{},options:{},meta:{},loadData:function(a){return t(Object.assign({},a,e.queryParam)).then((function(t){return e.meta=t.data.meta,t.data}))},selectedRowKeys:[],selectedRows:[],loadingObj:{refreshLoading:!1}}},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange,getCheckboxProps:this.getCheckboxProps}}},watch:{$route:{handler:function(){this.setFormValueFromQuery()},immediate:!0}},methods:{onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},getCheckboxProps:function(e){return{props:{name:e.name}}},batchDestroy:function(){var e=this;this.resourceName?0!==this.selectedRowKeys.length?this.$confirm({title:"你确定要批量删除数据？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){return c(e.resourceName,{ids:e.selectedRowKeys}).then((function(){e.$message.success("删除成功"),e.selectedRowKeys=[],e.selectedRows=e.$refs.table.refresh(!0)})).catch((function(){e.$message.error("删除失败")}))}}):this.$message.error("请选择"):this.$message.error("请配置资源名称")},toggleAdvanced:function(){this.advanced=!this.advanced},handleFilter:function(){var e={};o.a.forEach(this.queryParam,(function(t,a){"string"===typeof t&&(t=t.trim()),""!==t&&void 0!==t&&(e[a]=t)})),this.$router.push({path:this.$route.path,query:e})},setFormValueFromQuery:function(){var e=this,t=this.$route.query;o.a.forEach(t,(function(a,r){a=t[r],e.$set(e.queryParam,r,a)})),this.$nextTick((function(){e.$refs.table.refresh(!0)}))},handleRefresh:function(){var e=this;this.loadingObj.refreshLoading=!0,this.$refs.table.refresh(),setTimeout((function(){e.loadingObj.refreshLoading=!1}),500)},resetSearchForm:function(){this.queryParam={},this.$router.push({path:this.$route.path})},handleCreate:function(){this.mdl=null,this.visible=!0},handleEdit:function(e){this.visible=!0,this.mdl=Object(n["a"])({},e)},handleCancel:function(){this.visible=!1;var e=this.$refs.createModal.form;e.resetFields()},handleOk:function(){var e=this,t=this.$refs.createModal.form;this.confirmLoading=!0,t.validateFields((function(n,s){n?e.confirmLoading=!1:s.id>0?i(s.id,s).then((function(){e.visible=!1,e.confirmLoading=!1,t.resetFields(),e.$refs.table.refresh(),e.$message.success("修改成功")})).catch((function(a){var n=a.response.data,i=n.code,c=n.error;422===i&&o.a.forEach(c,(function(e,a){t.setFields(Object(r["a"])({},a,{value:s[a],errors:[{message:e[0],field:a}]}))})),e.confirmLoading=!1})):a(s).then((function(){e.visible=!1,e.confirmLoading=!1,t.resetFields(),e.$refs.table.refresh(),e.$message.success("新增成功")})).catch((function(a){var n=a.response.data,i=n.code,c=n.error;422===i&&o.a.forEach(c,(function(e,a){t.setFields(Object(r["a"])({},a,{value:s[a],errors:[{message:e[0],field:a}]}))})),e.confirmLoading=!1}))}))}}}}},"88bc":function(e,t,a){(function(t){var a=1/0,r=9007199254740991,n="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",s="[object Symbol]",c="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,d=c||l||Function("return this")();function u(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function h(e,t){var a=-1,r=e?e.length:0,n=Array(r);while(++a<r)n[a]=t(e[a],a,e);return n}function f(e,t){var a=-1,r=t.length,n=e.length;while(++a<r)e[n+a]=t[a];return e}var m=Object.prototype,p=m.hasOwnProperty,b=m.toString,v=d.Symbol,g=m.propertyIsEnumerable,y=v?v.isConcatSpreadable:void 0,w=Math.max;function _(e,t,a,r,n){var i=-1,o=e.length;a||(a=x),n||(n=[]);while(++i<o){var s=e[i];t>0&&a(s)?t>1?_(s,t-1,a,r,n):f(n,s):r||(n[n.length]=s)}return n}function j(e,t){return e=Object(e),O(e,t,(function(t,a){return a in e}))}function O(e,t,a){var r=-1,n=t.length,i={};while(++r<n){var o=t[r],s=e[o];a(s,o)&&(i[o]=s)}return i}function k(e,t){return t=w(void 0===t?e.length-1:t,0),function(){var a=arguments,r=-1,n=w(a.length-t,0),i=Array(n);while(++r<n)i[r]=a[t+r];r=-1;var o=Array(t+1);while(++r<t)o[r]=a[r];return o[t]=i,u(e,this,o)}}function x(e){return F(e)||E(e)||!!(y&&e&&e[y])}function $(e){if("string"==typeof e||N(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function E(e){return C(e)&&p.call(e,"callee")&&(!g.call(e,"callee")||b.call(e)==n)}var F=Array.isArray;function S(e){return null!=e&&L(e.length)&&!I(e)}function C(e){return P(e)&&S(e)}function I(e){var t=R(e)?b.call(e):"";return t==i||t==o}function L(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function R(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function P(e){return!!e&&"object"==typeof e}function N(e){return"symbol"==typeof e||P(e)&&b.call(e)==s}var q=k((function(e,t){return null==e?{}:j(e,h(_(t,1),$))}));e.exports=q}).call(this,a("c8ba"))},aba1:function(e,t,a){"use strict";a("4160"),a("159b");var r=a("88bc"),n=a.n(r);t["a"]=function(e){var t=e.fields;return{props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){return null}}},data:function(){return this.formLayout={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}}},{form:this.$form.createForm(this),isEdit:!1}},created:function(){var e=this;t.forEach((function(t){return e.form.getFieldDecorator(t)})),this.$watch("model",(function(){e.model&&e.form.setFieldsValue(n()(e.model,t)),e.isEdit=e.model&&e.model.id>0}))}}}},ddeb:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:(e.isEdit?"编辑":"新增")+"权限",width:640,visible:e.visible,"confirm-loading":e.loading},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-form",e._b({attrs:{form:e.form}},"a-form",e.formLayout,!1),[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{label:"主键ID"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{initialValue:0}],expression:"['id', { initialValue: 0 }]"}],attrs:{disabled:""}})],1),a("a-form-item",{attrs:{label:"名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,min:1,message:"请输入至少一个字符的名称！"}]}],expression:"['name', {rules: [{required: true, min: 1, message: '请输入至少一个字符的名称！'}]}]"}]})],1),a("a-form-item",{attrs:{label:"标识"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["slug",{rules:[{required:!0,min:1,message:"请输入至少一个字符的标识！"}]}],expression:"['slug', {rules: [{required: true, min: 1, message: '请输入至少一个字符的标识！'}]}]"}]})],1),a("a-form-item",{attrs:{label:"请求方法"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["http_method"],expression:"['http_method']"}],attrs:{mode:"multiple",allowClear:""}},e._l(e.methods,(function(t){return a("a-select-option",{key:t},[e._v(" "+e._s(t)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"请求地址"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["http_path"],expression:"['http_path']"}],attrs:{rows:4,"allow-clear":""}})],1)],1)],1)],1)},n=[],i=a("aba1"),o=["id","name","slug","http_method","http_path"],s=new i["a"]({fields:o}),c={mixins:[s],data:function(){return{methods:["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD"]}}},l=c,d=a("2877"),u=Object(d["a"])(l,r,n,!1,null,null,null);t["default"]=u.exports}}]);