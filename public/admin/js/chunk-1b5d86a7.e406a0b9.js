(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b5d86a7","chunk-587f69be"],{"116a":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-modal",{attrs:{title:(e.isEdit?"编辑":"新增")+"菜单",width:1e3,visible:e.visible,"confirm-loading":e.loading},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[r("a-spin",{attrs:{spinning:e.loading}},[r("a-form",e._b({attrs:{form:e.form}},"a-form",e.formLayout,!1),[r("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{label:"主键ID"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{initialValue:0}],expression:"['id', { initialValue: 0 }]"}],attrs:{disabled:""}})],1),r("a-form-item",{attrs:{label:"父级菜单"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parent_id",{rules:[{required:!0,message:"请选择父级菜单"}]}],expression:"['parent_id', {rules: [{required: true, message: '请选择父级菜单'}]}]"}],attrs:{"option-filter-prop":"children","show-search":!0,options:e.treeData,placeholder:"请选择父级菜单"}})],1),r("a-form-item",{attrs:{label:"菜单标识"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,min:1,message:"请输入至少一个字符的菜单标识！"}]}],expression:"['name', {rules: [{required: true, min: 1, message: '请输入至少一个字符的菜单标识！'}]}]"}],attrs:{placeholder:"菜单唯一标识"}})],1),r("a-form-item",{attrs:{label:"菜单标题"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,min:1,message:"请输入至少一个字符的菜单标题！"}]}],expression:"['title', {rules: [{required: true, min: 1, message: '请输入至少一个字符的菜单标题！'}]}]"}],attrs:{placeholder:"用作显示左侧菜单标题"}})],1),r("a-form-item",{attrs:{label:"组件名称"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["component",{rules:[{required:!0,message:"请选择组件名称"}]}],expression:"['component', {rules: [{required: true, message: '请选择组件名称'}]}]"}],attrs:{placeholder:"请选择组件名称",options:e.componentKeys}})],1),r("a-form-item",[r("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 重定向地址 "),r("a-tooltip",{attrs:{title:"用作顶级菜单，点击面包屑跳转地址"}},[r("a-icon",{attrs:{type:"question-circle-o"}})],1)],1),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["redirect"],expression:"['redirect']"}],attrs:{placeholder:"例如：/dashboard/workplace"}})],1),r("a-form-item",[r("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 路由PATH "),r("a-tooltip",{attrs:{title:"地址栏会显示该地址"}},[r("a-icon",{attrs:{type:"question-circle-o"}})],1)],1),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["path"],expression:"['path']"}],attrs:{placeholder:"例如：/dashboard/analysis"}})],1),r("a-form-item",{attrs:{label:"图标"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon"],expression:"['icon']"}]}),r("icon-selector",{on:{change:e.handleIconChange},model:{value:e.currentSelectedIcon,callback:function(t){e.currentSelectedIcon=t},expression:"currentSelectedIcon"}})],1),r("a-form-item",{attrs:{label:"排序"}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["order",{initialValue:0}],expression:"['order', {initialValue: 0}]"}],attrs:{min:0,max:99999999}})],1),r("a-form-item",{attrs:{label:"是否显示"}},[r("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_show",{valuePropName:"checked"}],expression:"['is_show', { valuePropName: 'checked' }]"}],attrs:{"checked-children":"是","un-checked-children":"否"}})],1),r("a-form-item",{attrs:{label:"角色"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["roles"],expression:"['roles']"}],attrs:{mode:"multiple",placeholder:"请选择角色",options:e.roleData}})],1),r("a-form-item",{attrs:{label:"权限"}},[r("a-transfer",{directives:[{name:"decorator",rawName:"v-decorator",value:["permissions"],expression:"['permissions']"}],attrs:{titles:["待选","已选"],"data-source":e.permissionData,"target-keys":e.targetKeys,"show-search":"",render:function(e){return e.title}},on:{change:e.handleChange}})],1)],1)],1)],1)},n=[],o=(r("4160"),r("d81d"),r("b0c0"),r("d3b7"),r("25f0"),r("159b"),r("96cf"),r("1da1")),i=r("88bc"),s=r.n(i),c=r("13bb"),l=r("aba1"),u=r("8da9"),d=r("aa0f"),m=r("2ef0e"),f=r.n(m),h=["id","parent_id","order","name","title","component","icon","redirect","path","is_show","roles","permissions"],p=new l["a"]({fields:h}),v={components:{IconSelector:c["a"]},mixins:[p],data:function(){return{currentSelectedIcon:"",permissionData:[],roleData:[],treeData:[],targetKeys:[],componentKeys:[]}},created:function(){var e=this;this.componentKeys=f.a.map(d["a"],(function(e,t){return{label:t,value:t}})),this.initCreateData(),this.$watch("model",(function(){if(e.isEdit=e.model&&e.model.id>0,e.isEdit){var t=[];e.model.roles.forEach((function(e){t.push(e.id)})),e.model.roles=t;var r=[];e.model.permissions.forEach((function(e){r.push(e.id.toString())})),e.targetKeys=r}e.model&&e.form.setFieldsValue(s()(e.model,h))}))},methods:{initCreateData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["b"])();case 2:r=t.sent,a=r.data,e.permissionData=a.permissions.map((function(e){return{key:e.id.toString(),title:e.name}})),e.roleData=a.roles.map((function(e){return{label:e.name,value:e.id}})),e.treeData=a.parent_tree;case 7:case"end":return t.stop()}}),t)})))()},handleChange:function(e,t,r){this.targetKeys=e},handleIconChange:function(e){this.form.setFieldsValue({icon:e})}}},b=v,g=(r("6036"),r("2877")),y=Object(g["a"])(b,a,n,!1,null,"bffe0dfe",null);t["default"]=y.exports},"1da1":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("d3b7"),r("e6cf");function a(e,t,r,a,n,o,i){try{var s=e[o](i),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(a,n)}function n(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,c,"next",e)}function c(e){a(i,n,o,s,c,"throw",e)}s(void 0)}))}}},6036:function(e,t,r){"use strict";var a=r("f6db"),n=r.n(a);n.a},"61e9":function(e,t,r){"use strict";r("4160"),r("b0c0"),r("498a"),r("159b");var a=r("ade3"),n=r("5530"),o=r("2ef0e"),i=r.n(o),s=r("b775");function c(e,t){return Object(s["b"])({url:"/".concat(e,"/batch"),method:"delete",data:t})}t["a"]=function(e){var t=e.getList,r=e.add,o=e.update;return{provide:function(){return{handleFilter:this.handleFilter,handleCreate:this.handleCreate,toggleAdvanced:this.toggleAdvanced,resetSearchForm:this.resetSearchForm,batchDestroy:this.batchDestroy,handleRefresh:this.handleRefresh}},data:function(){var e=this;return{resourceName:"",visible:!1,confirmLoading:!1,mdl:null,advanced:!1,queryParam:{},options:{},meta:{},loadData:function(r){return t(Object.assign({},r,e.queryParam)).then((function(t){return e.meta=t.data.meta,t.data}))},selectedRowKeys:[],selectedRows:[]}},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange,getCheckboxProps:this.getCheckboxProps}}},watch:{$route:{handler:function(){this.setFormValueFromQuery()},immediate:!0}},methods:{onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},getCheckboxProps:function(e){return{props:{name:e.name}}},batchDestroy:function(){var e=this;this.resourceName?0!==this.selectedRowKeys.length?this.$confirm({title:"你确定要批量删除数据？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){return c(e.resourceName,{ids:e.selectedRowKeys}).then((function(){e.$message.success("删除成功"),e.selectedRowKeys=[],e.selectedRows=e.$refs.table.refresh(!0)})).catch((function(){e.$message.error("删除失败")}))}}):this.$message.error("请选择"):this.$message.error("请配置资源名称")},toggleAdvanced:function(){this.advanced=!this.advanced},handleFilter:function(){var e={};i.a.forEach(this.queryParam,(function(t,r){"string"===typeof t&&(t=t.trim()),""!==t&&void 0!==t&&(e[r]=t)})),this.$router.push({path:this.$route.path,query:e})},setFormValueFromQuery:function(){var e=this,t=this.$route.query;i.a.forEach(t,(function(r,a){r=t[a],e.$set(e.queryParam,a,r)})),this.$nextTick((function(){e.$refs.table.refresh(!0)}))},handleRefresh:function(){this.$refs.table.refresh()},resetSearchForm:function(){this.queryParam={},this.$router.push({path:this.$route.path})},handleCreate:function(){this.mdl=null,this.visible=!0},handleEdit:function(e){this.visible=!0,this.mdl=Object(n["a"])({},e)},handleCancel:function(){this.visible=!1;var e=this.$refs.createModal.form;e.resetFields()},handleOk:function(){var e=this,t=this.$refs.createModal.form;this.confirmLoading=!0,t.validateFields((function(n,s){n?e.confirmLoading=!1:s.id>0?o(s.id,s).then((function(){e.visible=!1,e.confirmLoading=!1,t.resetFields(),e.$refs.table.refresh(),e.$message.success("修改成功")})).catch((function(r){var n=r.response.data,o=n.code,c=n.error;422===o&&i.a.forEach(c,(function(e,r){t.setFields(Object(a["a"])({},r,{value:s[r],errors:[{message:e[0],field:r}]}))})),e.confirmLoading=!1})):r(s).then((function(){e.visible=!1,e.confirmLoading=!1,t.resetFields(),e.$refs.table.refresh(),e.$message.success("新增成功")})).catch((function(r){var n=r.response.data,o=n.code,c=n.error;422===o&&i.a.forEach(c,(function(e,r){t.setFields(Object(a["a"])({},r,{value:s[r],errors:[{message:e[0],field:r}]}))})),e.confirmLoading=!1}))}))}}}}},"88bc":function(e,t,r){(function(t){var r=1/0,a=9007199254740991,n="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",s="[object Symbol]",c="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,u=c||l||Function("return this")();function d(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function m(e,t){var r=-1,a=e?e.length:0,n=Array(a);while(++r<a)n[r]=t(e[r],r,e);return n}function f(e,t){var r=-1,a=t.length,n=e.length;while(++r<a)e[n+r]=t[r];return e}var h=Object.prototype,p=h.hasOwnProperty,v=h.toString,b=u.Symbol,g=h.propertyIsEnumerable,y=b?b.isConcatSpreadable:void 0,w=Math.max;function x(e,t,r,a,n){var o=-1,i=e.length;r||(r=F),n||(n=[]);while(++o<i){var s=e[o];t>0&&r(s)?t>1?x(s,t-1,r,a,n):f(n,s):a||(n[n.length]=s)}return n}function k(e,t){return e=Object(e),$(e,t,(function(t,r){return r in e}))}function $(e,t,r){var a=-1,n=t.length,o={};while(++a<n){var i=t[a],s=e[i];r(s,i)&&(o[i]=s)}return o}function j(e,t){return t=w(void 0===t?e.length-1:t,0),function(){var r=arguments,a=-1,n=w(r.length-t,0),o=Array(n);while(++a<n)o[a]=r[t+a];a=-1;var i=Array(t+1);while(++a<t)i[a]=r[a];return i[t]=o,d(e,this,i)}}function F(e){return q(e)||C(e)||!!(y&&e&&e[y])}function O(e){if("string"==typeof e||I(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}function C(e){return D(e)&&p.call(e,"callee")&&(!g.call(e,"callee")||v.call(e)==n)}var q=Array.isArray;function S(e){return null!=e&&N(e.length)&&!E(e)}function D(e){return _(e)&&S(e)}function E(e){var t=R(e)?v.call(e):"";return t==o||t==i}function N(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function R(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){return!!e&&"object"==typeof e}function I(e){return"symbol"==typeof e||_(e)&&v.call(e)==s}var P=j((function(e,t){return null==e?{}:k(e,m(x(t,1),O))}));e.exports=P}).call(this,r("c8ba"))},"8da9":function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return s}));var a=r("b775");function n(e){return Object(a["b"])({url:"/admin-menus",method:"get",params:e})}function o(){return Object(a["b"])({url:"/admin-menus/create",method:"get"})}function i(e){return Object(a["b"])({url:"/admin-menus",method:"post",data:e})}function s(e,t){return Object(a["b"])({url:"/admin-menus/".concat(e),method:"put",data:t})}},"9a0b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("page-header-wrapper",[r("a-card",{attrs:{bordered:!1}},[r("page-filter",{attrs:{"query-param":e.queryParam,advanced:e.advanced,filters:e.filters}}),r("s-table",{ref:"table",attrs:{"row-key":"id",columns:e.columns,data:e.loadData,"show-pagination":!1},scopedSlots:e._u([{key:"icon",fn:function(t,a){return r("span",{},[a.icon?r("a-icon",{attrs:{type:a.icon}}):e._e()],1)}},{key:"action",fn:function(t,a){return r("span",{},[r("a",{on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑")]),r("a-divider",{attrs:{type:"vertical"}}),r("row-destroy",{attrs:{id:a.id,resource:"admin-menus"},on:{ok:e.handleFilter}})],1)}}])}),r("create-form",{ref:"createModal",attrs:{visible:e.visible,loading:e.confirmLoading,model:e.mdl},on:{cancel:e.handleCancel,ok:e.handleOk}})],1)],1)},n=[],o=r("8da9"),i=r("61e9"),s=r("116a"),c=new i["a"]({getList:o["c"],add:o["a"],update:o["d"]}),l={name:"MenuList",mixins:[c],components:{CreateForm:s["default"]},data:function(){return{columns:[{title:"ID",dataIndex:"id"},{title:"菜单唯一标识",dataIndex:"name"},{title:"菜单标题",dataIndex:"title"},{title:"组件映射名称",dataIndex:"component"},{title:"图标",dataIndex:"icon",scopedSlots:{customRender:"icon"}},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],filters:[]}}},u=l,d=r("2877"),m=Object(d["a"])(u,a,n,!1,null,null,null);t["default"]=m.exports},aba1:function(e,t,r){"use strict";r("4160"),r("159b");var a=r("88bc"),n=r.n(a);t["a"]=function(e){var t=e.fields;return{props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){return null}}},data:function(){return this.formLayout={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}}},{form:this.$form.createForm(this),isEdit:!1}},created:function(){var e=this;t.forEach((function(t){return e.form.getFieldDecorator(t)})),this.$watch("model",(function(){e.model&&e.form.setFieldsValue(n()(e.model,t)),e.isEdit=e.model&&e.model.id>0}))}}}},f6db:function(e,t,r){}}]);